<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Task</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='images/icon_pms.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/teamLeader.css') }}">
</head>
<body>

<!-- Header -->
<div class="header">
    <h1>âœï¸ Edit Task</h1>
</div>

<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-container">
      {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<!-- Main Form Section -->
<div class="page-wrapper">
    <h2 class="page-title">Update Task Details</h2>
    <hr class="section-divider">

    <form method="POST" action="{{ url_for('teamLeader_mainpage_bp.edit_task', task_id=task.task_id) }}" class="form-section">

        <label for="title"><strong>Title</strong></label>
        <input type="text" id="title" name="title" value="{{ task.title }}" required>

        <label for="description"><strong>Description</strong></label>
        <textarea id="description" name="description" required>{{ task.description }}</textarea>

        <label for="status"><strong>Status</strong></label>
        <select id="status" name="status" required>
            <option value="TODO" {% if task.status == "TODO" %}selected{% endif %}>TODO</option>
            <option value="IN PROGRESS" {% if task.status == "IN PROGRESS" %}selected{% endif %}>IN PROGRESS</option>
            <option value="DONE" {% if task.status == "DONE" %}selected{% endif %}>DONE</option>
        </select>

        <label for="priority"><strong>Priority</strong></label>
        <select id="priority" name="priority" required>
            <option value="Low" {% if task.priority == "Low" %}selected{% endif %}>Low</option>
            <option value="Medium" {% if task.priority == "Medium" %}selected{% endif %}>Medium</option>
            <option value="High" {% if task.priority == "High" %}selected{% endif %}>High</option>
        </select>

        <label for="due_date"><strong>Due Date</strong></label>
        <input type="date" id="due_date" name="due_date" value="{{ task.due_date }}">

        <div class="form-actions">
            <button type="submit" class="btn-primary">ğŸ’¾ Save Changes</button>
        </div>
    </form>

    <!-- Back button at the end -->
    <div class="back-btn-container">
        <a href="{{ request.referrer or url_for('teamLeader_mainpage_bp.view_task', task_id=task.task_id) }}" class="btn-back">â¬… Back</a>
    </div>
</div>

</body>
</html>
